/**
 * Header do calendário de expedientes
 * Versão traduzida e adaptada para expedientes com filtros específicos
 */

'use client';

import { motion } from 'framer-motion';
import { CalendarRange, Columns, Grid2X2, Grid3X3, LayoutList, List } from 'lucide-react';

import { ButtonGroup } from '@/components/ui/button-group';
import {
	slideFromLeft,
	slideFromRight,
	transition,
} from '@/components/animations';
import { useCalendar } from '@/components/calendar-context';
import { DateNavigator } from '@/components/date-navigator';
import { TodayButton } from '@/components/today-button';
import { UserSelect } from '@/components/user-select';
import { Settings } from '@/components/settings';
import Views from '@/components/view-tabs';
import { ExpedientesFilters } from './components/expedientes-filters';
import type { Usuario } from '@/backend/usuarios/services/persistence/usuario-persistence.service';
import type { TipoExpediente } from '@/backend/types/tipos-expedientes/types';

interface ExpedientesFiltersState {
	trt?: string;
	grau?: 'primeiro_grau' | 'segundo_grau' | 'tribunal_superior';
	responsavelId?: number | null;
	tipoExpedienteId?: number | null;
	baixado?: boolean;
	prazoVencido?: boolean;
}

interface ExpedientesCalendarHeaderProps {
	filters?: ExpedientesFiltersState;
	onFilterChange?: (filters: ExpedientesFiltersState) => void;
	onClearFilters?: () => void;
	usuarios?: Usuario[];
	tiposExpedientes?: TipoExpediente[];
	onRefresh?: () => void;
	isRefreshing?: boolean;
}

export function ExpedientesCalendarHeader({
	filters = {},
	onFilterChange,
	onClearFilters,
	usuarios = [],
	tiposExpedientes = [],
	onRefresh,
	isRefreshing = false,
}: ExpedientesCalendarHeaderProps) {
	const { view, events } = useCalendar();

	return (
		<div className="flex flex-col gap-4 border-b p-4 lg:flex-row lg:items-center lg:justify-between">
			<motion.div
				className="flex items-center gap-3"
				variants={slideFromLeft}
				initial="initial"
				animate="animate"
				transition={transition}
			>
				<TodayButton />
				<DateNavigator view={view} events={events} />
			</motion.div>

			<motion.div
				className="flex flex-col gap-4 lg:flex-row lg:items-center lg:gap-1.5"
				variants={slideFromRight}
				initial="initial"
				animate="animate"
				transition={transition}
			>
				<div className="options flex-wrap flex items-center gap-4 md:gap-2">
					{onFilterChange && onClearFilters && (
						<ExpedientesFilters
							usuarios={usuarios}
							tiposExpedientes={tiposExpedientes}
							selectedFilters={filters}
							onFilterChange={onFilterChange}
							onClearFilters={onClearFilters}
						/>
					)}
					<Views />
				</div>

				<div className="flex flex-col gap-4 lg:flex-row lg:items-center lg:gap-1.5">
					<UserSelect />
				</div>
				<Settings />
			</motion.div>
		</div>
	);
}

