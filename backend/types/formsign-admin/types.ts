/**
 * Formsign Admin Types (Backend)
 *
 * IMPORTANTE: Estes tipos são simplificados para payloads de API.
 * Para tipos completos e tipados, veja: @/types/formsign/
 *
 * Diferenças principais:
 * - FormsignTemplate.campos: string (JSON) vs Template.campos: TemplateCampo[]
 * - FormsignFormulario.form_schema: unknown vs FormularioEntity.form_schema: DynamicFormSchema
 * - FormsignSegmento é compatível com Segmento (mesma estrutura)
 */

export interface FormsignTemplate {
  id: number;
  template_uuid: string;
  nome: string;
  descricao?: string | null;
  arquivo_original: string;
  arquivo_nome: string;
  arquivo_tamanho: number;
  status: string;
  versao: number;
  ativo: boolean;
  campos: string;
  conteudo_markdown?: string | null;
  criado_por?: string | null;
  created_at?: string;
  updated_at?: string;
}

export interface FormsignTemplateList {
  templates: FormsignTemplate[];
  total: number;
}

export type StatusTemplate = 'ativo' | 'inativo' | 'rascunho';

export interface ListTemplatesParams {
  search?: string;
  ativo?: boolean;
  status?: StatusTemplate;
}

export interface UpsertTemplateInput {
  nome: string;
  arquivo_original: string;
  arquivo_nome: string;
  arquivo_tamanho: number;
  template_uuid?: string;
  descricao?: string | null;
  status?: string;
  versao?: number;
  ativo?: boolean;
  campos?: string;
  conteudo_markdown?: string | null;
  criado_por?: string | null;
}

export interface FormsignSegmento {
  id: number;
  nome: string;
  slug: string;
  descricao?: string | null;
  ativo: boolean;
  /**
   * Number of formularios associated with this segmento.
   * Populated by the list service when needed.
   */
  formularios_count?: number;
  created_at?: string;
  updated_at?: string;
}

export interface ListSegmentosParams {
  ativo?: boolean;
  search?: string;
}

export interface FormsignSegmentoList {
  segmentos: FormsignSegmento[];
  total: number;
}

export interface UpsertSegmentoInput {
  nome: string;
  slug: string;
  descricao?: string | null;
  ativo?: boolean;
}

export interface FormsignFormulario {
  id: number;
  formulario_uuid: string;
  nome: string;
  slug: string;
  descricao?: string | null;
  segmento_id: number;
  form_schema?: unknown;
  schema_version?: string;
  template_ids?: string[];
  ativo: boolean;
  ordem?: number | null;
  foto_necessaria?: boolean;
  geolocation_necessaria?: boolean;
  metadados_seguranca?: string;
  criado_por?: string | null;
  created_at?: string;
  updated_at?: string;
  segmento?: FormsignSegmento;
}

export interface ListFormulariosParams {
  segmento_id?: number | number[];
  ativo?: boolean;
  search?: string;
  foto_necessaria?: boolean;
  geolocation_necessaria?: boolean;
}

export interface FormsignFormularioList {
  formularios: FormsignFormulario[];
  total: number;
}

export interface UpsertFormularioInput {
  nome: string;
  slug: string;
  segmento_id: number;
  descricao?: string | null;
  form_schema?: unknown;
  schema_version?: string;
  template_ids?: string[];
  ativo?: boolean;
  ordem?: number | null;
  foto_necessaria?: boolean;
  geolocation_necessaria?: boolean;
  metadados_seguranca?: string;
  criado_por?: string | null;
}

export interface FormsignDashboardStats {
  templatesAtivos: number;
  assinaturasHoje: number;
  totalAssinaturasHoje: number;
  pdfsGeradosHoje: number;
  taxaSucesso: number;
  ultimaAtualizacao: string;
}
